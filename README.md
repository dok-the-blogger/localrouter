# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ Asus (Entware)

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Xray + SSH-—Ç—É–Ω–Ω–µ–ª—è –ø–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞ —Ä–æ—É—Ç–µ—Ä–∞ –∏–ª–∏ –∑–∞–º–µ–Ω—ã –∂–µ–ª–µ–∑–∞.

## üñ•Ô∏è –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—Ç–µ–Ω–¥–∞ (Environment)
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Ç–ª–∞–∂–µ–Ω–∞ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —Å—Ç–µ–∫–µ:
- **–ñ–µ–ª–µ–∑–æ:** Asus RT-AX82U (–∞–ø–ø–∞—Ä–∞—Ç–Ω–∞—è —Ä–µ–≤–∏–∑–∏—è V2)
- **–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä:** ARMv7 (Broadcom BCM675x, Cortex A7, 3 —è–¥—Ä–∞) ‚Äî *–≤–∞–∂–Ω–æ –ø—Ä–∏ —Ä—É—á–Ω–æ–º —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ Xray (–Ω—É–∂–µ–Ω linux-arm32-v7a).*
- **–ü—Ä–æ—à–∏–≤–∫–∞:** GNUton's Asuswrt-Merlin (build 3004.388.11_1-gnuton0_beta1). 
*–í–Ω–∏–º–∞–Ω–∏–µ: –ù–∞–ª–∏—á–∏–µ –ø—Ä–æ—à–∏–≤–∫–∏ Merlin –∏–ª–∏ –µ—ë —Ñ–æ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ! –ò–º–µ–Ω–Ω–æ –æ–Ω–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤ —Ä–∞–∑–¥–µ–ª–µ /jffs/, –∫–æ—Ç–æ—Ä—ã–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç —Ñ–ª–µ—à–∫—É —Å Entware –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ.*

---

## 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞–∫–µ—Ç—ã —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å (Entware –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É–∂–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞ —á–µ—Ä–µ–∑ amtm):

```bash
opkg install autossh openssh-client curl
```

–ï—Å–ª–∏ Xray –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤—Ä—É—á–Ω—É—é, –µ–≥–æ —Ç–æ–∂–µ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è).

## 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã.

### 2.1 –§–∞–π–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/opt/etc/.router.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –Ω–µ–≥–æ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
SELECTEL_IP="x.x.x.x"
SECRET_PASS="your_password"
DO_IP="x.x.x.x"
TARGETS="192.168.50.112 192.168.50.59"
```

*   `SELECTEL_IP` ‚Äî IP –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ Selectel.
*   `SECRET_PASS` ‚Äî –ü–∞—Ä–æ–ª—å –¥–ª—è Shadowsocks/VLESS.
*   `DO_IP` ‚Äî IP –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ –¥—Ä–æ–ø–ª–µ—Ç–∞ DigitalOcean.
*   `TARGETS` ‚Äî –°–ø–∏—Å–æ–∫ IP-–∞–¥—Ä–µ—Å–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏, —Ç—Ä–∞—Ñ–∏–∫ –∫–æ—Ç–æ—Ä—ã—Ö –Ω—É–∂–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å (—á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª).

### 2.2 SSH –∫–ª—é—á
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á `do_ss` –≤ `/opt/etc/ssh/`. –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –∏–∑ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
**–í–ê–ñ–ù–û:** –ñ–µ—Å—Ç–∫–æ –æ–≥—Ä–∞–Ω–∏—á—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∫–ª—é—á, –∏–Ω–∞—á–µ SSH –æ—Ç–∫–∞–∂–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å:
```bash
chmod 600 /opt/etc/ssh/do_ss
```

## 3. –î–µ–ø–ª–æ–π
–¢–µ–ø–µ—Ä—å –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω.
–ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:

```bash
./deploy.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1.  –ü–æ–¥—Ç—è–Ω–µ—Ç —Å–≤–µ–∂–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
2.  –ü–æ–¥—Å—Ç–∞–≤–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.router.env` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã.
3.  –†–∞–∑–ª–æ–∂–∏—Ç –∫–æ–Ω—Ñ–∏–≥–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã –ø–æ –Ω—É–∂–Ω—ã–º –ø—É—Ç—è–º (`/opt/etc/...`, `/jffs/scripts/...`).
4.  –í—ã—Å—Ç–∞–≤–∏—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.
5.  –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å Xray –∏ –æ–±–Ω–æ–≤–∏—Ç –ø—Ä–∞–≤–∏–ª–∞ —Ñ–∞–µ—Ä–≤–æ–ª–∞.

## 4. JFFS
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ —Ä–æ—É—Ç–µ—Ä–∞ (Administration -> System) –≤–∫–ª—é—á–µ–Ω–∞ –æ–ø—Ü–∏—è **"Enable JFFS custom scripts and configs"**.

## 5. Ad-Blocking (Xray Blackhole)
Xray –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, –Ω–æ –∏ –∫–∞–∫ —Å–µ—Ç–µ–≤–æ–π —Å–∞–Ω–∏—Ç–∞—Ä.
–í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –∏ —Ç—Ä–µ–∫–∏–Ω–≥–æ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–æ–º–µ–Ω–æ–≤.
–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ª–æ–≥–∏–∫–µ —Ä–∞–±–æ—Ç—ã –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞—Ö –ø—Ä–∞–≤–∏–ª —á–∏—Ç–∞–π—Ç–µ –≤ [docs/XRAY_CONFIG.md](docs/XRAY_CONFIG.md).
